<!DOCTYPE html><html><head><meta charset=utf-8 name=viewport content="width=device-width,initial-scale=1"><title>DroneInoTelemetry web app</title><style>:root{--h-panel-width:100%;--h-panel-height:7%;--h-panel-padding:5px;--v-panel-top:calc(var(--h-panel-height) + 2* var(--h-panel-padding));--v-panel-left-width:17%;--v-panel-left-height:calc(100% - 2*var(--h-panel-height));--v-panel-left-padding:2px;--v-panel-right-width:10%;--v-panel-right-height:calc(100% - 2*var(--h-panel-height));--v-panel-right-padding:var(--v-panel-left-padding);--gray-background:rgba(71,65,65,0.8);--gray-opac-background:rgba(79,77,77,0.5)}body{font-family:Arial,Helvetica,sans-serif;background:#181818;color:#efefef;font-size:16px;margin:0}img{display:block;max-width:99%;margin:0;margin-left:auto;margin-right:auto}@media only screen and (orientation:landscape){img{display:block;max-height:99%;margin:0;margin-left:auto;margin-right:auto}}.hidden{display:none}#upper-panel{position:absolute;top:0;left:0;padding:var(--h-panel-padding);width:var(--h-panel-width);height:var(--h-panel-height)}#bottom-panel{position:absolute;bottom:0;left:0;width:var(--h-panel-width);height:var(--h-panel-height)}#left-panel{position:absolute;text-align:center;top:var(--v-panel-top);left:0;max-width:var(--v-panel-left-width)}#right-panel{position:absolute;text-align:center;top:var(--v-panel-top);right:0;min-width:var(--v-panel-right-width)}#alert-msg{background-color:orange;animation:blinker 1s ease-out infinite}@keyframes blinker{70%{opacity:.4}}#get-still{background-color:gray}#face_enroll{background-color:#0005f6}#face_enroll:active{background-color:rgba(21,0,255,0.2)}#main-panel{overflow-y:scroll;position:absolute;top:var(--v-panel-top);left:var(--v-panel-left-width);width:calc(100% - var(--v-panel-left-width) - var(--v-panel-right-width));height:calc(100% - 2*var(--h-panel-height))}#battery-container{float:right;width:40px;margin-right:3%;border:1px solid #fff;background-color:#000;border-radius:10%;padding:0}#battery-level{width:40px}.v-panel-item{padding:var(--v-panel-right-padding);border-bottom:double}.h-panel-item{display:inline;float:right;vertical-align:sub;margin:0;padding:var(--h-panel-padding);border-right:double}.panel-toggling-item{display:inline;border-right:double;padding:4px;padding-top:7px;background-color:rgba(65,105,225,0.5)}.toggled-menu{background-color:var(--gray-background);padding:2px;float:left}.input-group{display:flex;flex-wrap:nowrap;margin:5px 0}.input-group>label{display:inline-block;padding-right:10px;min-width:47%}.range-max,.range-min{display:inline-block;padding:0 5px}.pid-label{display:inline-block;padding-right:6px;min-width:80px}.pid-input{border:1px solid #363636;font-size:14px;width:60px;height:22px;outline:0;border-radius:5px}input[type=text].default-action{max-width:87px}input[type=range]{-webkit-appearance:none;width:100%;height:22px;background:#363636;cursor:pointer;margin:0}input[type=range]::-webkit-slider-thumb{border:1px solid rgba(0,0,30,0);height:22px;width:22px;border-radius:50px;background:#ff3034;cursor:pointer;-webkit-appearance:none;margin-top:-11.5px}input[type=range]::-webkit-slider-runnable-track{height:2px;background:#efefef}.switch{display:block;position:relative;line-height:22px;font-size:16px;height:22px}.switch input{outline:0;opacity:0;width:0;height:0}.slider{width:50px;height:22px;border-radius:22px;cursor:pointer;background-color:grey}.slider,.slider:before{display:inline-block;transition:.4s}.slider:before{position:relative;content:"";border-radius:50%;height:16px;width:16px;left:4px;top:3px;background-color:#fff}input:checked+.slider{background-color:#ff3034}input:checked+.slider:before{-webkit-transform:translateX(26px);transform:translateX(26px)}</style></head><body><img id=stream src><div id=upper-panel><div class=panel-toggling-item id=telem-toggle-menu style=opacity:0.7> Telemetry </div><div class=panel-toggling-item id=PID-toggle-menu> PID </div><div class=panel-toggling-item id=cam-toggle-menu> Cam </div><div class=h-panel-item id=battery-container><div id=battery-level><span class=reading id=battery>1</span>V </div></div></div><div id=bottom-panel><div class=h-panel-item id=flightMode></div><div class=h-panel-item> GPS: <span class=reading id=gps></span> &deg; </div><div class=h-panel-item id=SD>SD: <a id=SDStatus>0</a></div></div><div id=left-panel class=toggled-menu><div class=v-panel-item> Pitch:<br><span class=reading id=pitchAngle></span> &deg; </div><div class=v-panel-item> Roll:<br><span class=reading id=rollAngle></span> &deg; </div><div class=v-panel-item> Alt:<br><span class=reading id=altitude></span> m </div><div class=v-panel-item> Temp:<br><span class=reading id=temperature></span> &deg;C </div></div><div id=right-panel><div class="v-panel-item hidden" id=alert-msg></div><div class=v-panel-item id=get-still>Capture</div><div class=v-panel-item id=face_enroll>Enroll face</div></div><div id=main-panel><div id=menu-pid class="toggled-menu hidden"> pitch/roll:<hr><div class=input-group><a class=pid-label>P</a><input class=default-action type=text id=rollPInput name=rollP></div><div class=input-group><a class=pid-label>I</a><input class=default-action type=text id=rollIInput name=rollI></div><div class=input-group><a class=pid-label>D</a><input class=default-action type=text id=rollDInput name=rollD></div><br> yaw:<hr><div class=input-group><a class=pid-label>P</a><input class=default-action type=text id=yawPInput name=yawP></div><div class=input-group><a class=pid-label>I</a><input class=default-action type=text id=yawIInput name=yawI></div><div class=input-group><a class=pid-label>D</a><input class=default-action type=text id=yawDInput name=yawD></div><br> pitch/roll filter:<hr><div class=input-group><a class=pid-label>high/low (&#37;)</a><input class=default-action type=text id=filterPitchRollInput name=filterPitchRoll></div><div class=input-group><a class=pid-label>roll corr (&deg;)</a><input class=default-action type=text id=correctionRollInput name=correctionRoll></div><div class=input-group><a class=pid-label>pitch corr (&deg;)</a><input class=default-action type=text id=correctionPitchInput name=correctionPitch></div><br> altitude:<hr><div class=input-group><a class=pid-label>P</a><input class=default-action type=text id=altitudePInput name=altitudeP></div><div class=input-group><a class=pid-label>I</a><input class=default-action type=text id=altitudeIInput name=altitudeI></div><div class=input-group><a class=pid-label>D</a><input class=default-action type=text id=altitudeDInput name=altitudeD></div></div><div id=menu-cam class="toggled-menu hidden"><div class=input-group id=framesize-group><label for=framesize>Resolution</label><select id=framesize class=default-action><option value=10>UXGA(1600x1200)</option><option value=9 selected=selected>SXGA(1280x1024)</option><option value=8>XGA(1024x768)</option><option value=7>SVGA(800x600)</option><option value=6>VGA(640x480)</option><option value=5>CIF(400x296)</option><option value=4>QVGA(320x240)</option><option value=3>HQVGA(240x176)</option><option value=0>QQVGA(160x120)</option></select></div><div class=input-group id=quality-group><label for=quality>Quality</label><div class=range-min>10</div><input type=range id=quality min=10 max=63 value=10 class=default-action><div class=range-max>63</div></div><div class=input-group id=brightness-group><label for=brightness>Brightness</label><div class=range-min>-2</div><input type=range id=brightness min=-2 max=2 value=0 class=default-action><div class=range-max>2</div></div><div class=input-group id=contrast-group><label for=contrast>Contrast</label><div class=range-min>-2</div><input type=range id=contrast min=-2 max=2 value=0 class=default-action><div class=range-max>2</div></div><div class=input-group id=saturation-group><label for=saturation>Saturation</label><div class=range-min>-2</div><input type=range id=saturation min=-2 max=2 value=0 class=default-action><div class=range-max>2</div></div><div class=input-group id=special_effect-group><label for=special_effect>Special Effect</label><select id=special_effect class=default-action><option value=0 selected=selected>No Effect</option><option value=1>Negative</option><option value=2>Grayscale</option><option value=3>Red Tint</option><option value=4>Green Tint</option><option value=5>Blue Tint</option><option value=6>Sepia</option></select></div><div class=input-group id=awb-group><label for=awb>AWB</label><div class=switch><input id=awb type=checkbox class=default-action checked=checked><label class=slider for=awb></label></div></div><div class=input-group id=awb_gain-group><label for=awb_gain>AWB Gain</label><div class=switch><input id=awb_gain type=checkbox class=default-action checked=checked><label class=slider for=awb_gain></label></div></div><div class=input-group id=wb_mode-group><label for=wb_mode>WB Mode</label><select id=wb_mode class=default-action><option value=0 selected=selected>Auto</option><option value=1>Sunny</option><option value=2>Cloudy</option><option value=3>Office</option><option value=4>Home</option></select></div><div class=input-group id=aec-group><label for=aec>AEC SENSOR</label><div class=switch><input id=aec type=checkbox class=default-action checked=checked><label class=slider for=aec></label></div></div><div class=input-group id=aec2-group><label for=aec2>AEC DSP</label><div class=switch><input id=aec2 type=checkbox class=default-action checked=checked><label class=slider for=aec2></label></div></div><div class=input-group id=ae_level-group><label for=ae_level>AE Level</label><div class=range-min>-2</div><input type=range id=ae_level min=-2 max=2 value=0 class=default-action><div class=range-max>2</div></div><div class=input-group id=aec_value-group><label for=aec_value>Exposure</label><div class=range-min>0</div><input type=range id=aec_value min=0 max=1200 value=204 class=default-action><div class=range-max>1200</div></div><div class=input-group id=agc-group><label for=agc>AGC</label><div class=switch><input id=agc type=checkbox class=default-action checked=checked><label class=slider for=agc></label></div></div><div class="input-group hidden" id=agc_gain-group><label for=agc_gain>Gain</label><div class=range-min>1x</div><input type=range id=agc_gain min=0 max=30 value=5 class=default-action><div class=range-max>31x</div></div><div class=input-group id=gainceiling-group><label for=gainceiling>Gain Ceiling</label><div class=range-min>2x</div><input type=range id=gainceiling min=0 max=6 value=0 class=default-action><div class=range-max>128x</div></div><div class=input-group id=bpc-group><label for=bpc>BPC</label><div class=switch><input id=bpc type=checkbox class=default-action><label class=slider for=bpc></label></div></div><div class=input-group id=wpc-group><label for=wpc>WPC</label><div class=switch><input id=wpc type=checkbox class=default-action checked=checked><label class=slider for=wpc></label></div></div><div class=input-group id=raw_gma-group><label for=raw_gma>Raw GMA</label><div class=switch><input id=raw_gma type=checkbox class=default-action checked=checked><label class=slider for=raw_gma></label></div></div><div class=input-group id=lenc-group><label for=lenc>Lens Correction</label><div class=switch><input id=lenc type=checkbox class=default-action checked=checked><label class=slider for=lenc></label></div></div><div class=input-group id=hmirror-group><label for=hmirror>H-Mirror</label><div class=switch><input id=hmirror type=checkbox class=default-action checked=checked><label class=slider for=hmirror></label></div></div><div class=input-group id=vflip-group><label for=vflip>V-Flip</label><div class=switch><input id=vflip type=checkbox class=default-action checked=checked><label class=slider for=vflip></label></div></div><div class=input-group id=dcw-group><label for=dcw>DCW (Downsize EN)</label><div class=switch><input id=dcw type=checkbox class=default-action checked=checked><label class=slider for=dcw></label></div></div><div class=input-group id=colorbar-group><label for=colorbar>Color Bar</label><div class=switch><input id=colorbar type=checkbox class=default-action><label class=slider for=colorbar></label></div></div><div class=input-group id=face_detect-group><label for=face_detect>Face Detection</label><div class=switch><input id=face_detect type=checkbox class=default-action><label class=slider for=face_detect></label></div></div><div class=input-group id=face_recognize-group><label for=face_recognize>Face Recognition</label><div class=switch><input id=face_recognize type=checkbox class=default-action><label class=slider for=face_recognize></label></div></div></div></div><script>document.addEventListener("DOMContentLoaded",function(){document.getElementById("PID-toggle-menu").onclick=function(){e(this,"menu-pid")};document.getElementById("cam-toggle-menu").onclick=function(){e(this,"menu-cam")};document.getElementById("telem-toggle-menu").onclick=function(){e(this,"left-panel")};function n(e){if(e.innerHTML==1)e.innerHTML="auto-leveling";else if(e.innerHTML==2)e.innerHTML="altitude hold";else if(e.innerHTML==3)e.innerHTML="altitude + GPS"}function o(e){var t=e.innerHTML;var n=parseFloat(t);var o=parseFloat(e.parentElement.parentElement.clientWidth);var c=n/12.6;e.parentElement.style.background="green";e.parentElement.style.width=o*c+"px";a(0);if(n<=11.3){e.parentElement.style.background="orange";a("Battery low!","orange")}if(n<=10.5){e.parentElement.style.background="red";a("DANGER battery level!","red")}}function e(e,t){var n=document.getElementById(t);if(n.className.includes(" hidden")){n.className=n.className.split(" hidden")[0];e.style.opacity=.7}else{n.className=n.className+" hidden";e.style.opacity=1}}var c=document.getElementById("alert-msg");function a(e,t="orange"){if(e!=0){c.classList.remove("hidden");c.style.background=t;c.innerHTML=e}else c.classList.add("hidden")}setInterval(t,10);function t(){var e=`${document.location.origin}/telemetry`;fetch(e).then(e=>{return e.json()}).then(e=>{for(var t in e){document.getElementById(t).innerHTML=e[t]}n(document.getElementById("flightMode"));o(document.getElementById("battery"))})}function u(e){let t;switch(e.type){case"checkbox":t=e.checked?1:0;break;case"range":case"select-one":t=e.value;break;case"button":case"submit":t="1";break;default:return}const n=`${d}/control?var=${e.id}&val=${t}`;fetch(n)}var d=document.location.origin;document.querySelectorAll("input[type=text].default-action").forEach(e=>{e.onkeyup=()=>{!function(e){const t=`${d}/pid?var=${e.id}&val=${e.value}`;fetch(t)}(e)}});const i=e=>{e.classList.add("hidden")},r=e=>{e.classList.remove("hidden")},l=e=>{e.classList.add("disabled"),e.disabled=!0},m=e=>{e.classList.remove("disabled"),e.disabled=!1},s=(e,t,n)=>{let o;n=!(null!=n)||n,"checkbox"===e.type?(o=e.checked,t=!!t,e.checked=t):(o=e.value,e.value=t),n&&o!==t?u(e):!n&&("aec"===e.id?t?i($):r($):"agc"===e.id?t?(r(b),i(h)):(i(b),r(h)):"awb_gain"===e.id?t?r(w):i(w):"face_recognize"===e.id&&(t?m(g):l(g)))};document.querySelectorAll(".close").forEach(e=>{e.onclick=()=>{i(e.parentNode)}}),fetch(`${d}/status`).then(function(e){return e.json()}).then(function(t){document.querySelectorAll(".default-action").forEach(e=>{s(e,t[e.id],!1)})});const f=document.getElementById("stream"),g=document.getElementById("face_enroll");f.src=`${d+":81"}/stream`,g.onclick=()=>{u(g)},document.querySelectorAll(".default-action").forEach(e=>{e.onchange=()=>u(e)});const v=document.getElementById("agc"),h=document.getElementById("agc_gain-group"),b=document.getElementById("gainceiling-group");v.onchange=()=>{u(v),v.checked?(r(b),i(h)):(i(b),r(h))};const p=document.getElementById("aec"),$=document.getElementById("aec_value-group");p.onchange=()=>{u(p),p.checked?i($):r($)};const _=document.getElementById("awb_gain"),w=document.getElementById("wb_mode-group");_.onchange=()=>{u(_),_.checked?r(w):i(w)};const k=document.getElementById("face_detect"),y=document.getElementById("face_recognize"),x=document.getElementById("framesize");x.onchange=()=>{u(x),5<x.value&&(s(k,!1),s(y,!1))},k.onchange=()=>5<x.value?(alert("Please lower resolution"),void s(k,!1)):(u(k),void(!k.checked&&(l(g),s(y,!1)))),y.onchange=()=>5<x.value?(alert("Please lower resolution"),void s(y,!1)):(u(y),void(y.checked?(m(g),s(k,!0)):l(g)))});</script></body></html>